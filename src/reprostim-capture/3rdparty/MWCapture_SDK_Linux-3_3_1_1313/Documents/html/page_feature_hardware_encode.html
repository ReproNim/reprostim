<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge"> 
    <meta name="generator" content="Doxygen 1.8.11"/>
    <title>mw_venc - MWCapture SDK Linux</title>
    <script src="https://cdn.bootcss.com/jquery/2.1.1/jquery.min.js"></script>
    <link href="mw_style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="dynsections.js"></script>
  </head>
  <body>
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
  <div id="titlearea">
    <table cellspacing="0" cellpadding="0">
    <tbody>
    <tr>
      <td id="projectalign">
      <div id="projectname"><a href="http://www.magewell.com/sdk" target="blank">MWCapture SDK Linux</a>
      &#160;<span id="projectnumber">3.3.1.LAST_SVN_COMMIT_NUM</span>
      </div>
      </td>
    </tr>
    </tbody>
    </table>
  </div>
  <!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="page_lib.html"><span>Development&#160;Library</span></a></li>
      <li><a href="Readme.html"><span>Release&#160;Notes</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">mw_venc </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>OverView</h2>
<p>GPU-accelerated H.264 and H.265 encoding is now supported by SDKv3, using the module named mw_venc. It converts video into stream with H.264 or H.265 (HEVC) compression for network distribution or space-efficient local storage.</p>
<p>GPU hardware encoder engines for video processing include de-interlacing, resizing , cropping and more. This dedicated encoder supports hardware acceleration of the codecs, thus leaving the CPU free for other operations and the graphics engine bandwidth fully available for video rendering. GPU-accelerated encoding enables higher performance in transcoding applications, and can be used in a flexible variety of motherboard configurations.</p>
<p>mw_venc, new in version 3.3.1, is now integrated into the SDK and will be maintained and updated with the SDK in the future. </p>
<h2>Key features</h2>
<p>mw_venc supports GPU-accelerated H.264 and H.265 encoding of video captured through Magewell capture devices. This feature is supported on GPUs from Nvidia, Intel and AMD. Performance will vary depending on the GPU vendor and model, as well as the motherboard configuration. Suggested configurations will be provided in a test report. </p>
<p>Note that in order to get the best performance from the GPU, the latest driver for the GPU hardware will be required. Please obtain and install the latest driver from your GPU manufacturer. </p>
<p>Features of mw_venc are as follows. </p>
<ol>
<li>
<p class="startli"></p>
<p>Support for hardware-based encoding of video into H.264/H.265 files</p>
<p></p>
<p>Please ensure that your GPU supports H.264 and H.265 hardware coding. For details, refer to your GPU vendor's hardware documentation. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p>Use the following interfaces to enumerate and choose among available hardware encoding devices. </p>
<p></p>
<p>List GPUs and obtain hardware information using <a class="el" href="group__group__hwe__functions.html#ga05a41036a9f770d219bca6303111f48f">mw_venc_get_gpu_num</a> and <a class="el" href="group__group__hwe__functions.html#gabe85430afd008d756635c105d813e187">mw_venc_get_gpu_info_by_index</a>. </p>
<p></p>
<p>Create an encoder and start encoding on the GPU specified by the index value using <a class="el" href="group__group__hwe__functions.html#gaec58641bb6ffda68cb1f865654773d93">mw_venc_create_by_index</a>. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p>Custom encoding parameters for various scenarios.</p>
<p></p>
<p>You can specify custom encoding parameters when creating each encoder instance, allowing you to fit your needs. You can specify profile, bit rate, resolution, frame rate, and even advanced settings including stream control mode and slice number. You can also use the default settings provided by <a class="el" href="group__group__hwe__functions.html#ga390998cb822ba3aecdfcefbe7cc2c254">mw_venc_get_default_param</a> to create an encoder. For detailed parameters refer to <a class="el" href="group__group__hwe__variables__struct.html#gaca662428f197549b558ca786bbb72e4b" title="mw_venc_param_t ">mw_venc_param_t</a>. </p>
<p></p>
<p>mw_venc can also change encoding parameters during encoding. You can obtain the value of specified parameters using <a class="el" href="group__group__hwe__functions.html#gabd1cab1d6b31b33de6be6771bc85bb30">mw_venc_get_property</a>, and modify the values during encoding using <a class="el" href="group__group__hwe__functions.html#ga88ce94ee4facb6a87d88c45aae28075a">mw_vnc_set_property</a>. For encoding parameters that can be modified, refer to <a class="el" href="group__group__hwe__variables__enum.html#gace8effbe4de00f9dbc1a4f2eafdc9fbc" title="mw_venc_property_t ">mw_venc_property_t</a>. Some parameters might not be able to be modified during in-progress encoding because the differences between GPU vendors, models and configurations are so varied and complex. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p>Multi-stream encoding on a single GPU.</p>
<p></p>
<p>You can create several encoders on a specified GPU using <a class="el" href="group__group__hwe__functions.html#gaec58641bb6ffda68cb1f865654773d93">mw_venc_create_by_index</a>. Encoders for H.264 or H.265 videos, or with different encoder settings such as resolutions and bit rates, can be created and can encode video streams simultaneously. </p>
<p></p>
<p>The limit on the number of encoders supported simultaneously varies depending on the GPU hardware specifications. See your GPU vendor's documentation for detailed information. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli"></p>
<p>Multi-stream encoding on different GPUs</p>
<p></p>
<p>You can create several encoders on different GPUs using <a class="el" href="group__group__hwe__functions.html#gaec58641bb6ffda68cb1f865654773d93">mw_venc_create_by_index</a>. Encoders, for H.264 or H.265, or with different settings such as resolutions and bit rates, can be created and can produce video streams simultaneously, and can work independently without interfering with each other. </p>
<p class="endli"></p>
</li>
</ol>
<h2>System Requirements</h2>
<p>vaapi needs to be installed for intel and AMD. cuda is used for nvidia. A newer OS (e.g. ubuntu 16.04 above) is recommended to recognize GPU and have better support for libva and vaapi compilement and build for Linux.</p>
<h2>Guidline</h2>
<p>API and data structure</p>
<p>C/C++ interfaces are supported by mw_venc.</p>
<p>Interfaces are as follows.</p>
<ul>
<li>
To initialize mw_venc: <a class="el" href="group__group__hwe__functions.html#gaec58641bb6ffda68cb1f865654773d93">mw_venc_init</a>  </li>
<li>
To enumerate the GPU(s): <a class="el" href="group__group__hwe__functions.html#ga05a41036a9f770d219bca6303111f48f">mw_venc_get_gpu_num</a> and <a class="el" href="group__group__hwe__functions.html#gabe85430afd008d756635c105d813e187">mw_venc_get_gpu_info_by_index</a>  </li>
<li>
To create an encoder: <a class="el" href="group__group__hwe__functions.html#gaec58641bb6ffda68cb1f865654773d93">mw_venc_create_by_index</a>  </li>
<li>
To feed video data: <a class="el" href="group__group__hwe__functions.html#ga73221cbca4671e371ec4727da5179e26">mw_venc_put_frame</a> amd <a class="el" href="group__group__hwe__functions.html#gaa4bcddc245714bd7a69a89638ba8baa5">mw_venc_put_frame_ex</a>  </li>
<li>
To obtain parameters of encoder dynamically: <a class="el" href="group__group__hwe__functions.html#gabd1cab1d6b31b33de6be6771bc85bb30">mw_venc_get_property</a>  </li>
<li>
To set parameters of encoder dynamically: <a class="el" href="group__group__hwe__functions.html#ga88ce94ee4facb6a87d88c45aae28075a">mw_venc_set_property</a>  </li>
<li>
To destroy an encoder: <a class="el" href="group__group__hwe__functions.html#gaa14eee2a512695ac19fdfc0368d8ba76">mw_venc_destory</a>  </li>
<li>
To destroy the mw_venc: <a class="el" href="group__group__hwe__functions.html#gae500f11b08c40f4196592ce2b1ebd645">mw_venc_deinit</a>  </li>
</ul>
<p>The data structures and definitions of functions related to hardware encoding are in the following files. </p>
<ul>
<li>
<a class="el" href="mw__venc__common_8h_source.html">mw_venc_common.h</a>  </li>
<li>
<a class="el" href="mw__venc_8h_source.html">mw_venc.h</a>  </li>
</ul>
<p>The data structures and detailed descriptions of functions related to hardware encoding are as follows. </p>
<ul>
<li>
<a class="el" href="group__group__hwe__variables__struct.html">Hardware Encoder Module Structures</a>  </li>
<li>
<a class="el" href="group__group__hwe__variables__enum.html">Hardware Encoder Module Enumeration</a>  </li>
<li>
<a class="el" href="group__group__hwe__functions.html">Hardware Encoder Module Functions</a>  </li>
</ul>
<h2>Examples</h2>
<p>VideoEncode is provided as an example, which supports to capture, render, encode, and save videos into H264 or H265 files.</p>
</div></div><!-- contents -->
<!-- start footer part -->
<footer class="global-footer">
  <div class="container">
    <div class="copyright">
      <span class="text">Â© 2019, Nanjing Magewell Electronics Co., Ltd. All rights reserved.</span>
    </div>
  </div>
</footer>
</body>
</html>
